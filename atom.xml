<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Eryoung2的个人博客</title>
  
  <subtitle>ErYoung2写字的地方</subtitle>
  <link href="http://eryoung2.github.io/atom.xml" rel="self"/>
  
  <link href="http://eryoung2.github.io/"/>
  <updated>2024-04-26T17:46:52.980Z</updated>
  <id>http://eryoung2.github.io/</id>
  
  <author>
    <name>ErYoung2</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CKS真题 -- 默认网络策略</title>
    <link href="http://eryoung2.github.io/2024/04/27/CKS%E7%9C%9F%E9%A2%98-%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5/"/>
    <id>http://eryoung2.github.io/2024/04/27/CKS%E7%9C%9F%E9%A2%98-%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5/</id>
    <published>2024-04-26T17:42:42.000Z</published>
    <updated>2024-04-26T17:46:52.980Z</updated>
    
    <content type="html"><![CDATA[<h2 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h2><p>为所有类型为Ingress-+Egress的流量在namespace testing中创建一个名为denypolicy的新默认拒绝NetworkPolicy。<br>此新的NetworkPolicy必须拒绝namespace testing中的所有的Ingress+Egress流量。<br>将新创建的默认拒绝NetworkPolicy应用与在namespace testing中运行的所有Pod。</p><p>你可以在&#x2F;cks&#x2F;net&#x2F;p1.yaml找到一个模板清单文件。</p><h2 id="做题"><a href="#做题" class="headerlink" title="做题"></a>做题</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /cks/net/p1.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">NetworkPolicy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">denypolicy</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">testing</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">podSelector:</span> &#123;&#125;                        <span class="comment">#拒绝所有pod</span></span><br><span class="line">  <span class="attr">policyTypes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Ingress</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Egress</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f /cks/net/p1.yaml</span><br></pre></td></tr></table></figure><h2 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl describe networkpolicy denypolicy -n testing</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/network-policies/#default-deny-all-ingress-traffic">https://kubernetes.io/zh-cn/docs/concepts/services-networking/network-policies/#default-deny-all-ingress-traffic</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;任务&quot;&gt;&lt;a href=&quot;#任务&quot; class=&quot;headerlink&quot; title=&quot;任务&quot;&gt;&lt;/a&gt;任务&lt;/h2&gt;&lt;p&gt;为所有类型为Ingress-+Egress的流量在namespace testing中创建一个名为denypolicy的新默认拒绝Netwo</summary>
      
    
    
    
    <category term="考试" scheme="http://eryoung2.github.io/categories/%E8%80%83%E8%AF%95/"/>
    
    
    <category term="cks" scheme="http://eryoung2.github.io/tags/cks/"/>
    
  </entry>
  
  <entry>
    <title>CKS真题 -- Pod指定ServiceAccount</title>
    <link href="http://eryoung2.github.io/2024/04/27/CKS%E7%9C%9F%E9%A2%98-Pod%E6%8C%87%E5%AE%9AServiceAccount/"/>
    <id>http://eryoung2.github.io/2024/04/27/CKS%E7%9C%9F%E9%A2%98-Pod%E6%8C%87%E5%AE%9AServiceAccount/</id>
    <published>2024-04-26T17:31:17.000Z</published>
    <updated>2024-04-26T17:43:28.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h2><p>清单文件&#x2F;cks&#x2F;sa&#x2F;pod1.yaml中指定的Pod由于ServiceAccount指定错误而无法调度。<br>请完成一下项目：</p><p>Task<br>1.在现有namespace ga中创建一个名为backend-sa的新ServiceAccount,<br>确保此ServiceAccount不自动挂载API凭据。<br>2.使用&#x2F;cks&#x2F;sa&#x2F;pod1.yaml中的清单文件来创建一个Pod。<br>3.最后，清理namespace ga中任何未使用的ServiceAccount。</p><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>vim cks-02.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">backend-sa</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">qa</span></span><br><span class="line"><span class="attr">automountServiceAccountToken:</span> <span class="literal">false</span> <span class="comment">#添加这一行</span></span><br></pre></td></tr></table></figure><p>vim &#x2F;cks&#x2F;sa&#x2F;pod1.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">backend</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">qa</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">backend-sa</span>                  <span class="comment">#给pod配置serviceaccount</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:alpine</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">backend</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f /cks/sa/pod1.yaml</span><br><span class="line"></span><br><span class="line">kubectl get sa -n qa</span><br><span class="line">kubectl get pod -n qa|grep -i &quot;serviceaccount&quot;</span><br><span class="line">kubectl -n qa delete xxx #没见到的serviceaccount</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#opt-out-of-api-credential-automounting">https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#opt-out-of-api-credential-automounting</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;任务&quot;&gt;&lt;a href=&quot;#任务&quot; class=&quot;headerlink&quot; title=&quot;任务&quot;&gt;&lt;/a&gt;任务&lt;/h2&gt;&lt;p&gt;清单文件&amp;#x2F;cks&amp;#x2F;sa&amp;#x2F;pod1.yaml中指定的Pod由于ServiceAccount指定错误而无法调度。&lt;</summary>
      
    
    
    
    <category term="考试" scheme="http://eryoung2.github.io/categories/%E8%80%83%E8%AF%95/"/>
    
    
    <category term="cks" scheme="http://eryoung2.github.io/tags/cks/"/>
    
  </entry>
  
  <entry>
    <title>CKS真题 -- kube-bench修复不安全项</title>
    <link href="http://eryoung2.github.io/2024/04/27/CKS%E7%9C%9F%E9%A2%98-kube-bench%E4%BF%AE%E5%A4%8D%E4%B8%8D%E5%AE%89%E5%85%A8%E9%A1%B9/"/>
    <id>http://eryoung2.github.io/2024/04/27/CKS%E7%9C%9F%E9%A2%98-kube-bench%E4%BF%AE%E5%A4%8D%E4%B8%8D%E5%AE%89%E5%85%A8%E9%A1%B9/</id>
    <published>2024-04-26T17:05:49.000Z</published>
    <updated>2024-04-26T17:26:29.476Z</updated>
    
    <content type="html"><![CDATA[<h2 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h2><p>通过配置修复所有问题并重新启动受影响的组件以确保新的设置生效。</p><p>修复针对 API 服务器发现的所有以下违规行为：<br>1.2.7 Ensure that the –authorization-mode argument is not set to AlwaysAllow FAIL<br>1.2.8 Ensure that the –authorization-mode argument includes Node FAIL<br>1.2.9 Ensure that the –authorization-mode argument includes RBAC FAIL<br>1.2.18 Ensure that the –insecure-bind-address argument is not set FAIL （1.25中这项题目没给出，但最好也检查一下，模拟环境里需要改）<br>~~1.2.19 Ensure that the –insecure-port argument is set to 0 FAIL ~~（1.25中这项题目没给出，不需要再修改了）</p><p>修复针对kubelet发现的所有以下违规行为：<br>Fix all of the following violations that were found against the kubelet:<br>4.2.1 Ensure that the anonymous-auth argument is set to false FAIL<br>4.2.2 Ensure that the –authorization-mode argument is not set to AlwaysAllow FAIL<br>注意：尽可能使用 Webhook 身份验证&#x2F;授权。</p><p>修复针对etcd发现的所有以下违规行为：<br>Fix all of the following violations that were found against etcd:<br>2.2 Ensure that the –client-cert-auth argument is set to true FAIL</p><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><ol><li><p>备份文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/backup/01</span><br><span class="line">cp -f /etc/kubernetes/manifests/kube-apiserver.yaml /opt/backup/01</span><br><span class="line">cp -f /etc/kubernetes/manifests/etcd.yaml /opt/backup/01</span><br><span class="line">cp -f /var/lib/kubelet/config.yaml /opt/backup/01</span><br></pre></td></tr></table></figure></li><li><p>检查master的不安全项并修改<br>ssh hk8s-master<br>sudo kube-bench master<br>vim &#x2F;etc&#x2F;kubernetes&#x2F;manifests&#x2F;kube-apiserver.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">--authencation-mode=Node,RBAC</span> </span><br></pre></td></tr></table></figure></li></ol><p>vim &#x2F;etc&#x2F;kubernetes&#x2F;manifests&#x2F;etcd.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">--client-cert-auth=true</span></span><br></pre></td></tr></table></figure><p>vim &#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;config.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">authentication:</span></span><br><span class="line">   <span class="attr">anonymous:</span></span><br><span class="line">     <span class="attr">enabled:</span> <span class="literal">false</span>     <span class="comment">#true修改成false</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">authorization:</span></span><br><span class="line">   <span class="attr">mode:</span> <span class="string">Webhook</span>        <span class="comment">#把AlwaysAllow修改成Webhook</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>检查node的不安全项并修改，同master</p></li><li><p>重启kubelet</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart kubelet</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;任务&quot;&gt;&lt;a href=&quot;#任务&quot; class=&quot;headerlink&quot; title=&quot;任务&quot;&gt;&lt;/a&gt;任务&lt;/h2&gt;&lt;p&gt;通过配置修复所有问题并重新启动受影响的组件以确保新的设置生效。&lt;/p&gt;
&lt;p&gt;修复针对 API 服务器发现的所有以下违规行为：&lt;br&gt;1.2</summary>
      
    
    
    
    <category term="考试" scheme="http://eryoung2.github.io/categories/%E8%80%83%E8%AF%95/"/>
    
    
    <category term="cks" scheme="http://eryoung2.github.io/tags/cks/"/>
    
  </entry>
  
  <entry>
    <title>cka真题</title>
    <link href="http://eryoung2.github.io/2024/04/02/cka%E7%9C%9F%E9%A2%98/"/>
    <id>http://eryoung2.github.io/2024/04/02/cka%E7%9C%9F%E9%A2%98/</id>
    <published>2024-04-01T18:01:18.000Z</published>
    <updated>2024-04-01T18:02:17.498Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Part1-17个题目"><a href="#Part1-17个题目" class="headerlink" title="Part1 17个题目"></a>Part1 17个题目</h2><p>第1题.基于角色的访问控制-RBAC<br>第2题.节点维护—指定node节点不可用<br>第3题.K8s版本升级<br>第4题.Etcd数据库备份恢复<br>第5题.网络策略NetworkPolicy<br>第6题.四层负载均衡service<br>第7题.七层负载均衡Ingress<br>第8题.Deployment管理pod扩缩容<br>第9题.pod指定节点部署<br>第10题.检查Node节点的健康状态<br>第11题.一个Pod封装多个容器<br>第12题.持久化存储卷PersistentVolume<br>第13题.PersistentVolumeClaim<br>第14题.监控Pod日志<br>第15题.Sidecar代理<br>第16题.监控Pod度量指标<br>第17题.集群故障排查——kubelet故障</p><h2 id="Part2-准备"><a href="#Part2-准备" class="headerlink" title="Part2 准备"></a>Part2 准备</h2><p>vim ~&#x2F;.bashrc<br>alias k&#x3D;”kubectl”<br>export drc&#x3D;”–dry-run&#x3D;client -oyaml”<br>export now&#x3D;”–force –grace-period 0”<br>source ~&#x2F;.bashrc</p><h2 id="Part3-解题"><a href="#Part3-解题" class="headerlink" title="Part3 解题"></a>Part3 解题</h2><h3 id="1-RBAC-4分"><a href="#1-RBAC-4分" class="headerlink" title="1. RBAC(4分)"></a>1. RBAC(4分)</h3><p>中文解释：<br>创建一个名为deployment-clusterrole的clusterrole，该clusterrole只允许创建Deployment、Daemonset、Statefulset的create操作<br>在名字为app-team1的namespace下创建一个名为cicd-token的serviceAccount，并且将上一步创建clusterrole的权限绑定到该serviceAccount</p><p>解法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">k create clusterrole deployment-clusterrole --verb=create --resource=deployments,daemonsets,statefulsets</span><br><span class="line">k create serviceaccount cicd-token -n app-team1</span><br><span class="line">k create rolebinding role-account-binding --clusterrole=deployment-clusterrole --serviceaccount=app-tema1:cicd-token -n app-team1</span><br></pre></td></tr></table></figure><p>验证</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl auth can-i create deployment --as system:serviceaccount:app-team1:cicd-token -n app-team1 -- <span class="built_in">yes</span></span><br><span class="line">kubectl auth can-i create daemonset --as system:serviceaccount:app-team1:cicd-token -n app-team1  -- <span class="built_in">yes</span></span><br><span class="line">kubectl auth can-i create statefulset --as system:serviceaccount:app-team1:cicd-token -n app-team1 -- <span class="built_in">yes</span></span><br><span class="line">kubectl auth can-i create pod --as system:serviceaccount:app-team1:cicd-token -n app-team1 -- no</span><br></pre></td></tr></table></figure><p>参考：<br><a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">https://kubernetes.io/docs/reference/access-authn-authz/rbac/</a><br><a href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-service-account/">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-service-account/</a></p><h3 id="2-节点维护（4分）"><a href="#2-节点维护（4分）" class="headerlink" title="2. 节点维护（4分）"></a>2. 节点维护（4分）</h3><p>将ek8s-node-1节点设置为不可用，然后重新调度该节点上的所有Pod</p><p>解法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl config use-context ek8s</span><br><span class="line">k cordon ek8s-node-1</span><br><span class="line">k drain ek8s-node-1 --ignore-daesonsets --delete-emptydir-data --force</span><br></pre></td></tr></table></figure><p>参考：<br><a href="https://kubernetes.io/zh/docs/tasks/configure-pod-container/">https://kubernetes.io/zh/docs/tasks/configure-pod-container/</a><br><a href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/">https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/</a><br><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#drain">https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#drain</a></p><h3 id="3-K8s升级版本（7分）"><a href="#3-K8s升级版本（7分）" class="headerlink" title="3. K8s升级版本（7分）"></a>3. K8s升级版本（7分）</h3><p>将master节点升级到v1.29.00，不升级相关组件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">kubectl cordon k8s-master01</span><br><span class="line">kubectl drain k8s-master01 --ignore-daemonsets --delete-emptydir-data --force</span><br><span class="line"></span><br><span class="line">ssh k8s-master01</span><br><span class="line">sudo -i</span><br><span class="line">apt update -y &amp;&amp;  apt-cache madison kubeadm</span><br><span class="line">apt-mark unhold kubeadm &amp;&amp; \</span><br><span class="line">apt-get update &amp;&amp; sudo apt-get install -y kubeadm=<span class="string">&#x27;1.29.x-*&#x27;</span> &amp;&amp; \</span><br><span class="line">apt-mark hold kubeadm</span><br><span class="line"></span><br><span class="line">kubeadm version</span><br><span class="line">kubeadm upgrade plan --etcd-upgrade=<span class="literal">false</span> </span><br><span class="line">kubeadm upgrade apply v1.29.x</span><br><span class="line"></span><br><span class="line">apt-mark unhold kubelet kubectl &amp;&amp; \</span><br><span class="line">apt-get update &amp;&amp; sudo apt-get install -y kubelet=<span class="string">&#x27;1.29.x-*&#x27;</span> kubectl=<span class="string">&#x27;1.29.x-*&#x27;</span> &amp;&amp; \</span><br><span class="line">apt-mark hold kubelet kubectl</span><br><span class="line"></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart kubelet</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">kubectl uncordon k8s-master01</span><br></pre></td></tr></table></figure><h3 id="4-etcd备份与恢复（7分）"><a href="#4-etcd备份与恢复（7分）" class="headerlink" title="4. etcd备份与恢复（7分）"></a>4. etcd备份与恢复（7分）</h3><p>针对etcd实例<a href="https://127.0.0.1:2379创建一个快照，保存到">https://127.0.0.1:2379创建一个快照，保存到</a> &#x2F;srv&#x2F;data&#x2F;etcd-snapshot.db。在创建快照的过程中，如果卡住了，就键入ctrl+c终止，然后重试。<br>然后恢复一个已经存在的快照：&#x2F;var&#x2F;lib&#x2F;backup&#x2F;etcd-snapshot-previous.db<br>执行etcdctl命令的证书存放在：<br>ca证书：&#x2F;opt&#x2F;KUIN00601&#x2F;ca.crt<br>客户端证书：&#x2F;opt&#x2F;KUIN00601&#x2F;etcd-client.crt<br>客户端密钥：&#x2F;opt&#x2F;KUIN00601&#x2F;etcd-client.key</p><p>解法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#备份</span></span><br><span class="line">ETCDCTL_API=3 etcdctl --endpoints=<span class="string">&quot;https://127.0.0.1:2379&quot;</span> --cacert=/opt/KUIN00601/ca.crt --cert=/opt/KUIN00601/etcd-client.crt --key=/opt/KUIN00601/etcd-client.key snapshot save /srv/data/etcd-snapshot.db</span><br><span class="line"></span><br><span class="line"><span class="comment">#恢复(如果恢复后集群崩掉，可以跳过)</span></span><br><span class="line">systemctl stop etcd</span><br><span class="line"><span class="built_in">mkdir</span> -p /opt/etcd-backup</span><br><span class="line"><span class="built_in">mv</span> /etc/kubernetes/manifests/kube-* /opt/etcd-backup/</span><br><span class="line">ETCDCTL_API=3 etcdctl --endpoints=<span class="string">&quot;https://127.0.0.1:2379&quot;</span> --cacert=/opt/KUIN00601/ca.crt --cert=/opt/KUIN00601/etcd-client.crt --key=/opt/KUIN00601/etcd-client.key snapshot restore /var/lib/backup/etcd-snapshot-previous.db --data-dir=/var/lib/backup/</span><br><span class="line">vim /etc/kubernetes/manifests/etcd.yaml, change volume from /var/lib/etcd/ to /var/lib/backup</span><br><span class="line"><span class="built_in">chown</span> -R etcd:etcd /var/lib/backup</span><br><span class="line"><span class="built_in">mv</span> /opt/etcd-backup/ /etc/kubernetes/manifests/</span><br><span class="line">systemctl restart etcd</span><br></pre></td></tr></table></figure><h3 id="5-NetworkPolicy（7分）"><a href="#5-NetworkPolicy（7分）" class="headerlink" title="5. NetworkPolicy（7分）"></a>5. NetworkPolicy（7分）</h3><p>创建一个名字为allow-port-from-namespace的NetworkPolicy，这个NetworkPolicy允许internal命名空间下的Pod访问该命名空间下的9000端口。<br>并且不允许不是internal命令空间的下的Pod访问<br>不允许访问没有监听9000端口的Pod。</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vim 5.yaml</span><br><span class="line">-----------------</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: NetworkPolicy</span><br><span class="line">metadata:</span><br><span class="line">  name: allow-port-from-namespace</span><br><span class="line">  namespace: internal</span><br><span class="line">spec:</span><br><span class="line">  podSelector: &#123;&#125;</span><br><span class="line">  policyTypes:</span><br><span class="line">  - Ingress</span><br><span class="line">  ingress:</span><br><span class="line">  - from:</span><br><span class="line">    - podSelector: &#123;&#125;</span><br><span class="line">    ports:</span><br><span class="line">    - port: 9000</span><br><span class="line">      protocol: TCP</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">k apply -f 5.yaml</span><br></pre></td></tr></table></figure><h3 id="6-service（7分）"><a href="#6-service（7分）" class="headerlink" title="6. service（7分）"></a>6. service（7分）</h3><p>重新配置一个已经存在的deployment front-end，在名字为nginx的容器里面添加一个端口配置，名字为http，暴露端口号为80&#x2F;TCP，然后创建一个service，名字为front-end-svc，暴露该deployment的http端口，并且service的类型为NodePort。</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Add config into existing deployment front-end</span><br><span class="line">k edit deployment front-end</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: nginx</span><br><span class="line">        <span class="comment"># 需要加这四行</span></span><br><span class="line">        ports:</span><br><span class="line">        - name: http</span><br><span class="line">          containerPort: 80</span><br><span class="line">          protocol: TCP</span><br><span class="line"></span><br><span class="line">k expose deploy front-end --name=front-end-svc --port=80 --<span class="built_in">type</span>=NodePort --target-port=http</span><br></pre></td></tr></table></figure><h3 id="7-Ingress-7分"><a href="#7-Ingress-7分" class="headerlink" title="7. Ingress(7分)"></a>7. Ingress(7分)</h3><p>在ing-internal 命名空间下创建一个ingress，名字为pong，代理的service hi，端口为5678，配置路径&#x2F;hi。<br>验证：访问curl -kL <INTERNAL_IP>&#x2F;hi会返回hi。</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">vim 7-ing-class.yaml</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: IngressClass</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    app.kubernetes.io/component: controller</span><br><span class="line">  name: nginx-example</span><br><span class="line">  annotations:</span><br><span class="line">    ingressclass.kubernetes.io/is-default-class: <span class="string">&quot;true&quot;</span></span><br><span class="line">spec:</span><br><span class="line">  controller: k8s.io/ingress-nginx</span><br><span class="line"></span><br><span class="line">vim 7-ing.yaml</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: pong</span><br><span class="line">  namespace: ing-internal</span><br><span class="line">  annotations:</span><br><span class="line">    nginx.ingress.kubernetes.io  <span class="comment">#如果ing没有internal ip，就添加这一行</span></span><br><span class="line">    nginx.ingress.kubernetes.io/rewrite-target: /</span><br><span class="line">spec:</span><br><span class="line">  ingressClassName: nginx</span><br><span class="line">  rules:</span><br><span class="line">  - http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /hi</span><br><span class="line">        pathType: Prefix</span><br><span class="line">        backend:</span><br><span class="line">          service:</span><br><span class="line">            name: hi</span><br><span class="line">            port:</span><br><span class="line">              number: 5678</span><br><span class="line"></span><br><span class="line">k apply -f 7-ing.yaml</span><br><span class="line">curl -kL &lt;internal-ip&gt;/hi</span><br></pre></td></tr></table></figure><h3 id="8-Deployment缩扩容-4分"><a href="#8-Deployment缩扩容-4分" class="headerlink" title="8. Deployment缩扩容(4分)"></a>8. Deployment缩扩容(4分)</h3><p>扩容名字为loadbalancer的deployment的副本数为6</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl config use-context k8s</span><br><span class="line">k scale --replicas=6 deployment loadbalancer</span><br></pre></td></tr></table></figure><h3 id="9-指定节点部署（4分）"><a href="#9-指定节点部署（4分）" class="headerlink" title="9. 指定节点部署（4分）"></a>9. 指定节点部署（4分）</h3><p>创建一个Pod，名字为nginx-kusc00401，镜像地址是nginx，调度到具有disk&#x3D;spinning标签的节点上</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">k run nginx-kusc00401 --image=nginx <span class="variable">$drc</span> &gt; 9.yaml</span><br><span class="line">vim 9.yaml</span><br><span class="line">vim pod-ns.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-kusc00401</span><br><span class="line">  labels:</span><br><span class="line">    role: nginx-kusc00401</span><br><span class="line">spec:</span><br><span class="line">  nodeSelector:   <span class="comment">#添加nodeSelector标签，在spec下面，没有就打标签</span></span><br><span class="line">    disk: spinning</span><br><span class="line">  containers:</span><br><span class="line">    - name: nginx</span><br><span class="line">      image: nginx</span><br><span class="line"></span><br><span class="line">k apply -f 9.yaml</span><br></pre></td></tr></table></figure><h3 id="10-检查node节点健康状态（4分）"><a href="#10-检查node节点健康状态（4分）" class="headerlink" title="10. 检查node节点健康状态（4分）"></a>10. 检查node节点健康状态（4分）</h3><p>检查集群中有多少节点为Ready状态，并且去除包含NoSchedule污点的节点。之后将数字写到&#x2F;opt&#x2F;KUSC00402&#x2F;kusc00402.txt</p><p>解法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl config use-context k8s</span><br><span class="line">k get nodes|grep -v &quot;Taint&quot;|grep -v &quot;Noschedule&quot;|wc -l &gt; /opt/KUSC00402/kusc00402.txt</span><br></pre></td></tr></table></figure><h3 id="11-一个pod多个容器-4分"><a href="#11-一个pod多个容器-4分" class="headerlink" title="11. 一个pod多个容器(4分)"></a>11. 一个pod多个容器(4分)</h3><p>创建一个Pod，名字为kucc1，这个Pod可能包含1-4容器，该题为四个：nginx+redis+memcached+consul</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">k run kucc1 --image=nginx <span class="variable">$drc</span> &gt; 11.yaml</span><br><span class="line">然后补全所有容器信息，最后apply</span><br><span class="line">k apply -f 11.yaml</span><br></pre></td></tr></table></figure><h3 id="12-Persistent-Volume-4分"><a href="#12-Persistent-Volume-4分" class="headerlink" title="12. Persistent Volume(4分)"></a>12. Persistent Volume(4分)</h3><p>创建一个pv，名字为app-config，大小为2Gi，访问权限为ReadWriteMany。Volume的类型为hostPath，路径为&#x2F;srv&#x2F;app-config</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: app-config</span><br><span class="line">  labels:</span><br><span class="line">    <span class="built_in">type</span>: <span class="built_in">local</span></span><br><span class="line">spec:</span><br><span class="line">  storageClassName: manual   <span class="comment"># 需要有这一项吗？题目没有要求，（可以不写）</span></span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 2Gi</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteMany</span><br><span class="line">  hostPath:</span><br><span class="line">    path: <span class="string">&quot;/srv/app-config&quot;</span></span><br><span class="line"></span><br><span class="line">k apply -f 12.yaml</span><br></pre></td></tr></table></figure><p>参考：<br><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/">https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/</a><br><a href="https://kubernetes.io/zh-cn/docs/concepts/storage/persistent-volumes/">https://kubernetes.io/zh-cn/docs/concepts/storage/persistent-volumes/</a><br>可以ctrl+F 搜003，会直接跳转到创建pv<br><a href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolume">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolume</a></p><h3 id="13-监控Pod度量指标（5分）"><a href="#13-监控Pod度量指标（5分）" class="headerlink" title="13. 监控Pod度量指标（5分）"></a>13. 监控Pod度量指标（5分）</h3><p>找出具有name&#x3D;cpu-user的Pod，并过滤出使用CPU最高的Pod，然后把它的名字写在已经存在的 &#x2F;opt&#x2F;KUTR00401&#x2F;KUTR00401.txt文件里（注意他没有说指定namespace。所以需要使用-A指定所以namespace）</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">k config use-context k8s</span><br><span class="line">k top pod -A -l name=cpu-user</span><br><span class="line">NAMESPACE     NAME                       CPU(cores)   MEMORY(bytes)   </span><br><span class="line">kube-system   coredns-54d67798b7-hl8xc   7m           8Mi   </span><br><span class="line">kube-system   coredns-54d67798b7-m4m2q   6m           8Mi</span><br><span class="line"></span><br><span class="line">k <span class="string">&quot;coredns-54d67798b7-hl8xc&quot;</span> &gt; /opt/KUTR00401/KUTR00401.txt</span><br></pre></td></tr></table></figure><h3 id="14-监控pod日志（5分）"><a href="#14-监控pod日志（5分）" class="headerlink" title="14. 监控pod日志（5分）"></a>14. 监控pod日志（5分）</h3><p>监控名为foobar的Pod的日志，并过滤出具有unable-access-website信息的行，然后将写入到 &#x2F;opt&#x2F;KUTR00101&#x2F;foobar</p><p>解法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k logs foobar|grep unable-access-website &gt; /opt/KUTR00101/foobar</span><br></pre></td></tr></table></figure><h3 id="15-CSI和PVC"><a href="#15-CSI和PVC" class="headerlink" title="15. CSI和PVC"></a>15. CSI和PVC</h3><p>创建一个名字为pv-volume的pvc，指定storageClass为csi-hostpath-sc，大小为10Mi<br>然后创建一个Pod，名字为web-server，镜像为nginx，并且挂载该PVC至&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html，挂载的权限为ReadWriteOnce。之后通过 kubectl edit或者 kubectl path将pvc改成70Mi，并且记录修改记录。</p><p>解法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">vim 15-pvc.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: pv-volume</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteOnce</span><br><span class="line">  volumeMode: Filesystem</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 10Mi</span><br><span class="line">  storageClassName: csi-hostpath-sc</span><br><span class="line"></span><br><span class="line">k apply -f 15-pvc.yaml</span><br><span class="line"></span><br><span class="line">vim 15-pod.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: pv-volume</span><br><span class="line">spec:</span><br><span class="line">  volumes:</span><br><span class="line">    - name: pv-volume</span><br><span class="line">      persistentVolumeClaim:</span><br><span class="line">        claimName: pv-volume</span><br><span class="line">  containers:</span><br><span class="line">    - name: web-server</span><br><span class="line">      image: nginx</span><br><span class="line">      volumeMounts:</span><br><span class="line">        - mountPath: <span class="string">&quot;/usr/share/nginx/html&quot;</span></span><br><span class="line">          name: pv-volume</span><br><span class="line"></span><br><span class="line">k apply -f 15-pod.yaml</span><br><span class="line"></span><br><span class="line">kubectl edit pvc pv-volume</span><br><span class="line">kubectl edit pvc pv-volume --record</span><br><span class="line">kubectl edit pvc pv-volume --save-config</span><br></pre></td></tr></table></figure><h3 id="16-sidecar-7分"><a href="#16-sidecar-7分" class="headerlink" title="16. sidecar(7分)"></a>16. sidecar(7分)</h3><p>添加一个名为busybox且镜像为busybox的sidecar到一个已经存在的名为legacy-app的Pod上，这个sidecar的启动命令为 &#x2F;bin&#x2F;sh, -c, ‘tail -n+1 -f &#x2F;var&#x2F;log&#x2F;legacy-app.log’。<br>并且这个sidecar和原有的镜像挂载一个名为logs的volume，挂载的目录为&#x2F;var&#x2F;log&#x2F;。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">k get pod legacy-app -o yaml &gt; c-sidecar.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: legacy-app</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: count</span><br><span class="line">    image: busybox</span><br><span class="line">    args:</span><br><span class="line">    - /bin/sh</span><br><span class="line">    - -c</span><br><span class="line">    - &gt;</span><br><span class="line">      i=0;</span><br><span class="line">      <span class="keyword">while</span> <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(date)</span> INFO <span class="variable">$i</span>&quot;</span> &gt;&gt; /var/log/legacy-ap.log;</span><br><span class="line">        i=$((i+<span class="number">1</span>));</span><br><span class="line">        <span class="built_in">sleep</span> 1;</span><br><span class="line">      <span class="keyword">done</span></span><br><span class="line">      <span class="comment"># 以下为添加部分</span></span><br><span class="line">    volumeMounts:</span><br><span class="line">    - name: logs</span><br><span class="line">      mountPath: /var/log</span><br><span class="line">  - name: busybox</span><br><span class="line">    image: busybox</span><br><span class="line">    args: [/bin/sh, -c, <span class="string">&#x27;tail -n+1 -f /var/log/legacy-ap.log&#x27;</span>]</span><br><span class="line">    volumeMounts:</span><br><span class="line">    - name: logs</span><br><span class="line">      mountPath: /var/log</span><br><span class="line">  volumes:</span><br><span class="line">  - name: logs</span><br><span class="line">    emptyDir: &#123;&#125;</span><br><span class="line"></span><br><span class="line">k delete -f c-sidecar.yaml</span><br><span class="line">k create -f c-sidecar.yaml</span><br></pre></td></tr></table></figure><h3 id="17-kubelet故障（13分）"><a href="#17-kubelet故障（13分）" class="headerlink" title="17. kubelet故障（13分）"></a>17. kubelet故障（13分）</h3><p>一个名为wk8s-node-0的节点状态为NotReady，让其他恢复至正常状态，并确认所有的更改开机自动完成</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh wk8s-node-0</span><br><span class="line">k get nodes</span><br><span class="line">systemctl status kubelet <span class="comment"># 然后fix</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Part1-17个题目&quot;&gt;&lt;a href=&quot;#Part1-17个题目&quot; class=&quot;headerlink&quot; title=&quot;Part1 17个题目&quot;&gt;&lt;/a&gt;Part1 17个题目&lt;/h2&gt;&lt;p&gt;第1题.基于角色的访问控制-RBAC&lt;br&gt;第2题.节点维护—指定n</summary>
      
    
    
    
    <category term="考试" scheme="http://eryoung2.github.io/categories/%E8%80%83%E8%AF%95/"/>
    
    
    <category term="cka" scheme="http://eryoung2.github.io/tags/cka/"/>
    
  </entry>
  
  <entry>
    <title>Macbook Air去掉刘海</title>
    <link href="http://eryoung2.github.io/2024/03/11/Macbook-Air%E5%8E%BB%E6%8E%89%E5%88%98%E6%B5%B7/"/>
    <id>http://eryoung2.github.io/2024/03/11/Macbook-Air%E5%8E%BB%E6%8E%89%E5%88%98%E6%B5%B7/</id>
    <published>2024-03-11T14:20:01.000Z</published>
    <updated>2024-03-12T02:20:16.147Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近想买一台新电脑，最终选中了Macbook Air M2版本，主要是使用强度并不大，而且我也很想加入星巴克气氛组，于是选择了它。<br>也是因为它相比新发布的M3 Macbook Air来说，性价比还是高一些，再加上走的是官翻+24期免息，可以说非常满意了。</p><p>但是很不爽的是，它有刘海，这就让人很不爽了。</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>但好在我们还是有办法去消除刘海，可以使用TopNorch Mac这款软件来做。</p><p>我们去到官方网站，然后下载软件：<br><a href="https://topnotch.app/">https://topnotch.app/</a></p><p>此软件是免费的，下载下来进行安装，然后打开即可。</p><p><img src="https://raw.githubusercontent.com/ErYoung2/imgbed/master/2024/03/11-22-28-33-WX20240311-222607%402x.png"></p><p>同时，它还可以去掉圆角，可以说非常方便了。</p><p>就可以了，非常简单。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;最近想买一台新电脑，最终选中了Macbook Air M2版本，主要是使用强度并不大，而且我也很想加入星巴克气氛组，于是选择了它。&lt;br&gt;也</summary>
      
    
    
    
    <category term="操作系统" scheme="http://eryoung2.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="Mac" scheme="http://eryoung2.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>《后来的我们》- 五月天</title>
    <link href="http://eryoung2.github.io/2024/01/20/%E3%80%8A%E5%90%8E%E6%9D%A5%E7%9A%84%E6%88%91%E4%BB%AC%E3%80%8B-%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    <id>http://eryoung2.github.io/2024/01/20/%E3%80%8A%E5%90%8E%E6%9D%A5%E7%9A%84%E6%88%91%E4%BB%AC%E3%80%8B-%E4%BA%94%E6%9C%88%E5%A4%A9/</id>
    <published>2024-01-20T11:09:32.000Z</published>
    <updated>2024-01-20T11:24:19.318Z</updated>
    
    <content type="html"><![CDATA[<p>然后呢，他们说你的心，似乎痊愈了，<br>也开始有个人，为你守护着，<br>我该心安还是心痛呢？</p><p>然后呢，其实我的日子也还可以呢，<br>除了回忆肆虐的某些时刻，<br>庆幸还有眼泪冲淡苦涩。</p><p>而那些昨日，依然缤纷着，<br>它们都有我，细心收藏着，<br>也许你还记得，也许你都忘了，<br>也不是那么，重要了。</p><p>只期待，后来的你，能快乐，<br>那就是，后来的我，最想的。<br>后来的我们，依然走着，只是不再并肩了，<br>朝各自的人生，追寻了。</p><p>无论是，后来故事，怎么了，<br>也要让，后来人生，精彩着。<br>后来的人生，我期待着，<br>泪水中能看到，你真的，自由了。</p><p>亲爱的，回忆我们共同走过的曲折，<br>是那些带我们来到了这一刻，<br>让珍贵的人生，有失有得。</p><p>用新的幸福，把遗憾包着，<br>就这么朝着未来，前进了。<br>有再多的不舍，也要狠心割舍，<br>别回头看我，亲爱的。</p><p>只期待，后来的你，能快乐，<br>那就是，后来的我，最想的。<br>后来的我们依然走着，只是不再并肩了，<br>想各自的人生，追寻了。</p><p>无论是后来故事，怎么了，<br>也要让后来人生，精彩着。<br>后来的我们，我期待着，<br>泪水中能看到，你真的，幸福快乐。</p><p>在某处，另一个你，留下了，<br>在那里，另一个我，微笑着。<br>另一个我们，还深爱着，代替我们永恒着，<br>如果能这么想，就够了。</p><p>无论是，后来故事，怎么了，<br>也要让，后来人生，值得。<br>后来的人生，我期待着，<br>泪水中能看到，你真的，自由了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;然后呢，他们说你的心，似乎痊愈了，&lt;br&gt;也开始有个人，为你守护着，&lt;br&gt;我该心安还是心痛呢？&lt;/p&gt;
&lt;p&gt;然后呢，其实我的日子也还可以呢，&lt;br&gt;除了回忆肆虐的某些时刻，&lt;br&gt;庆幸还有眼泪冲淡苦涩。&lt;/p&gt;
&lt;p&gt;而那些昨日，依然缤纷着，&lt;br&gt;它们都有我，细心收藏</summary>
      
    
    
    
    <category term="歌词" scheme="http://eryoung2.github.io/categories/%E6%AD%8C%E8%AF%8D/"/>
    
    
    <category term="五月天" scheme="http://eryoung2.github.io/tags/%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    
  </entry>
  
  <entry>
    <title>《漠河舞厅》-- 柳爽</title>
    <link href="http://eryoung2.github.io/2023/11/21/%E3%80%8A%E6%BC%A0%E6%B2%B3%E8%88%9E%E5%8E%85%E3%80%8B-%E6%9F%B3%E7%88%BD/"/>
    <id>http://eryoung2.github.io/2023/11/21/%E3%80%8A%E6%BC%A0%E6%B2%B3%E8%88%9E%E5%8E%85%E3%80%8B-%E6%9F%B3%E7%88%BD/</id>
    <published>2023-11-21T03:46:26.000Z</published>
    <updated>2023-11-21T03:58:48.436Z</updated>
    
    <content type="html"><![CDATA[<p>我从没有见过极光出现的村落，也没有见过有人，在深夜放烟火。</p><p>晚风就像你的眼睛杀人又放火，你什么都没有说，野风惊扰我。</p><p>    </p><p>三千里，偶然见过你，花园里，有裙翩舞起。</p><p>灯光底，抖漏了晨曦，在1980的漠河舞厅。</p><p>如果有时间，你会来看一看我吧，</p><p>看时间如何衰老的，我的眼睛如何融化。</p><p>如果你看见我的话，请转过身去再惊讶，</p><p>我怕我的眼泪、我的白发，像羞耻的笑话。</p><p>    </p><p>我从没有见过极光出现的村落，也没有见过有人，在深夜放烟火。</p><p>晚风就像你的眼睛杀人又放火，你什么都没有说，野风惊扰我。</p><p>    </p><p>可是你，惹怒了神明，让你去，还那么年轻。</p><p>都怪你，野山冷冰冰，在一个人的漠河舞厅。</p><p>    </p><p>如果有时间，你会来看一看我吧，</p><p>看时间如何衰老的，我的眼睛如何融化。</p><p>如果你看见我的话，请转过身去再惊讶，</p><p>我怕我的眼泪、我的白发，像羞耻的笑话。</p><p>    </p><p>如果有一天，我的信念突然倒塌，</p><p>城市的花园没有花，广播里的声音嘶哑。</p><p>如果真有这天的话， 你会不会奔向我啊，</p><p>尘封入海吧，尘封入海吧！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我从没有见过极光出现的村落，也没有见过有人，在深夜放烟火。&lt;/p&gt;
&lt;p&gt;晚风就像你的眼睛杀人又放火，你什么都没有说，野风惊扰我。&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;三千里，偶然见过你，花园里，有裙翩舞起。&lt;/p&gt;
&lt;p&gt;灯光底，抖漏了晨曦，在1980的漠河舞厅。&lt;/p</summary>
      
    
    
    
    <category term="歌词" scheme="http://eryoung2.github.io/categories/%E6%AD%8C%E8%AF%8D/"/>
    
    
    <category term="柳爽" scheme="http://eryoung2.github.io/tags/%E6%9F%B3%E7%88%BD/"/>
    
  </entry>
  
  <entry>
    <title>xcrun missing问题</title>
    <link href="http://eryoung2.github.io/2023/09/11/xcrun-missing%E9%97%AE%E9%A2%98/"/>
    <id>http://eryoung2.github.io/2023/09/11/xcrun-missing%E9%97%AE%E9%A2%98/</id>
    <published>2023-09-10T16:37:51.000Z</published>
    <updated>2023-09-10T16:42:16.711Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天在安装brew的时候，发现以下问题：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</span><br></pre></td></tr></table></figure><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><ul><li><p>重装xcode command line</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure></li><li><p>没解决的话，可以跑这条</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcode-select -switch /</span><br></pre></td></tr></table></figure></li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="https://www.jianshu.com/p/50b6771eb853">https://www.jianshu.com/p/50b6771eb853</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;今天在安装brew的时候，发现以下问题：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;t</summary>
      
    
    
    
    <category term="环境配置" scheme="http://eryoung2.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="Mac" scheme="http://eryoung2.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>使用bat脚本激活office</title>
    <link href="http://eryoung2.github.io/2023/09/08/%E4%BD%BF%E7%94%A8bat%E8%84%9A%E6%9C%AC%E6%BF%80%E6%B4%BBoffice/"/>
    <id>http://eryoung2.github.io/2023/09/08/%E4%BD%BF%E7%94%A8bat%E8%84%9A%E6%9C%AC%E6%BF%80%E6%B4%BBoffice/</id>
    <published>2023-09-08T06:25:46.000Z</published>
    <updated>2023-09-12T01:36:06.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在我们安装windows的时候，很重要的一个步骤就是激活。</p><p>安装windows的同时，通常也需要安装office，同样需要激活。</p><p>两个方法都是可以使用kms进行伪激活的，好处是免费，坏处是盗版，不过不care啦，对不起，微软哥，囊中是在羞射。。。</p><p>windows我之前写过一期：</p><blockquote><p><a href="https://www.cnblogs.com/young233/p/13112054.html">https://www.cnblogs.com/young233/p/13112054.html</a></p></blockquote><p>本文讨论office。</p><h2 id="office的kms"><a href="#office的kms" class="headerlink" title="office的kms"></a>office的kms</h2><p>我们可以使用kmsripo这个软件进行激活，当然要找到靠谱的软件，否则就容易被病毒侵入。</p><p>在此，我们可以使用以下脚本进行安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">(cd /d &quot;%~dp0&quot;)&amp;&amp;(NET FILE||(powershell start-process -FilePath &#x27;%0&#x27; -verb runas)&amp;&amp;(exit /B)) &gt;NUL 2&gt;&amp;1</span><br><span class="line">title Office 2019 Activator r/Piracy</span><br><span class="line">echo Converting... &amp; mode 40,25</span><br><span class="line">(if exist &quot;%ProgramFiles%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles%\Microsoft Office\Office16&quot;)&amp;(if exist &quot;%ProgramFiles(x86)%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles(x86)%\Microsoft Office\Office16&quot;)&amp;(for /f %%x in (&#x27;dir /b ..\root\Licenses16\ProPlus2019VL*.xrm-ms&#x27;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;(for /f %%x in (&#x27;dir /b ..\root\Licenses16\ProPlus2019VL*.xrm-ms&#x27;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)</span><br><span class="line">cscript //nologo ospp.vbs /unpkey:6MWKP &gt;nul&amp;cscript //nologo ospp.vbs /inpkey:NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP &gt;nul&amp;set i=1</span><br><span class="line">:server</span><br><span class="line">if %i%==1 set KMS_Sev=kms7.MSGuides.com</span><br><span class="line">if %i%==2 set KMS_Sev=kms8.MSGuides.com</span><br><span class="line">if %i%==3 set KMS_Sev=kms9.MSGuides.com</span><br><span class="line">cscript //nologo ospp.vbs /sethst:%KMS_Sev% &gt;nul</span><br><span class="line">echo %KMS_Sev% &amp; echo Activating...</span><br><span class="line">cscript //nologo ospp.vbs /act | find /i &quot;successful&quot; &amp;&amp; (echo Complete) || (echo Trying another KMS Server &amp; set /a i+=1 &amp; goto server)</span><br><span class="line">pause &gt;nul</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>复制以上内容，新建一个bat文件，写入之后，使用“管理员运行”即可。</p><p>然后就可以了，可以添加一个定时任务，每3个月跑一次，就不会过期了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;在我们安装windows的时候，很重要的一个步骤就是激活。&lt;/p&gt;
&lt;p&gt;安装windows的同时，通常也需要安装office，同样需要激活</summary>
      
    
    
    
    <category term="windows" scheme="http://eryoung2.github.io/categories/windows/"/>
    
    
    <category term="bat" scheme="http://eryoung2.github.io/tags/bat/"/>
    
    <category term="kms" scheme="http://eryoung2.github.io/tags/kms/"/>
    
  </entry>
  
  <entry>
    <title>Macbook系统降级</title>
    <link href="http://eryoung2.github.io/2023/08/27/Macbook%E7%B3%BB%E7%BB%9F%E9%99%8D%E7%BA%A7/"/>
    <id>http://eryoung2.github.io/2023/08/27/Macbook%E7%B3%BB%E7%BB%9F%E9%99%8D%E7%BA%A7/</id>
    <published>2023-08-27T07:14:34.000Z</published>
    <updated>2023-08-27T08:06:58.047Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于笔者有一台老Macbook Pro，是2015年款的，信仰灯还能亮，所以我始终不舍得卖掉；但是由于硬件限制，运行现在的Mac系统非常艰难，风扇狂转、反应太慢，就跟一个哮喘病人一样，我都替它难受。于是我想给它做个系统降级，然后就收藏起来了。</p><h2 id="制作启动盘-or-网络恢复？"><a href="#制作启动盘-or-网络恢复？" class="headerlink" title="制作启动盘 or 网络恢复？"></a>制作启动盘 or 网络恢复？</h2><p>两种方法我都有试过，网络恢复有三种选项：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Command+R: 恢复到现有系统版本</span><br><span class="line">Command+Option+R：恢复到现机器最新系统版本</span><br><span class="line">Command+Option+Shift+R: 恢复到出厂设置时的系统版本</span><br></pre></td></tr></table></figure><p>由于笔者在安装时抹掉了所有磁盘，在试图网络恢复时，总是遇到以下问题：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">准备安装时发生错误，请尝试重新运行此应用程序</span><br></pre></td></tr></table></figure><p>这个问题的原因有两个，一个是磁盘没抹除干净，一个是时间不对，需要手动设置到目前的时间。可以参考这个帖子：</p><blockquote><p><a href="https://www.jianshu.com/p/b4736f53c0d8">格式化苹果系统，重装系统提示“准备安装时发生错误，请尝试重新运行此应用程序” - 简书</a></p></blockquote><p>笔者花了一天时间试了很多次，均未安装成功。所以，我用了另一种方法–制作USB启动盘。</p><p>其实就是系统的刻录，但是需要一些其他的步骤：</p><ol><li><p>下载目标系统到电脑，并进行安装，使其进入Application目录。</p></li><li><p>插入目标U盘，进行格式化，使用“Mac OS扩展（日志）”格式，并将U盘重命名为MyVolume，此步骤为必须。</p></li><li><p>打开终端，运行相应版本的命令，进行刻录。笔者安装的是High Sierra系统，所以跑的是这个：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/Install\ macOS\ High\ Sierra.app/Contents/Resources/createinstallmedia --volume /Volumes/MyVolume</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://raw.githubusercontent.com/ErYoung2/imgbed/master/2023/08/27-15-54-50-downgrade.png"></p><p>详情可以参考官方文档：<a href="https://support.apple.com/zh-cn/HT201372"># 创建可引导的 macOS 安装器</a></p><ol start="4"><li><p>进入目标Mac，将磁盘格式化为“Mac OS扩展（日志）”格式即可。</p></li><li><p>将此U盘卸载后插入目标Mac，启动时长按Option，选择“Install xx”，从U盘启动，一步一步进行操作即可。</p></li><li><p>安装完毕之后，按照提示进行设置，进入系统后即可看到系统降级成功。</p><p>如果此时遇到“应用副本已损坏”的报错，并不是我们的副本真的损坏，而是应用证书过期，我们可以参考这篇文章：<a href="https://zhuanlan.zhihu.com/p/91707695"># macOS安装过程中“应用副本已损坏”的解决方案</a></p></li></ol><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>Mac的恢复较为复杂，还是推荐使用本地的恢复方式，即制作启动盘然后进行安装。我一开始被网络恢复带歪了，后来发现没什么用，尤其是所有磁盘彻底被格式化之后，我一度差点装个windows上去，真的挺麻烦的，不愧是你啊，苹果！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;由于笔者有一台老Macbook Pro，是2015年款的，信仰灯还能亮，所以我始终不舍得卖掉；但是由于硬件限制，运行现在的Mac系统非常艰难</summary>
      
    
    
    
    <category term="操作系统" scheme="http://eryoung2.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="Mac" scheme="http://eryoung2.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>关于日本排放核废水和普利戈金死掉的看法</title>
    <link href="http://eryoung2.github.io/2023/08/25/%E5%85%B3%E4%BA%8E%E6%97%A5%E6%9C%AC%E6%8E%92%E6%94%BE%E6%A0%B8%E5%BA%9F%E6%B0%B4%E5%92%8C%E6%99%AE%E5%88%A9%E6%88%88%E9%87%91%E6%AD%BB%E6%8E%89%E7%9A%84%E7%9C%8B%E6%B3%95/"/>
    <id>http://eryoung2.github.io/2023/08/25/%E5%85%B3%E4%BA%8E%E6%97%A5%E6%9C%AC%E6%8E%92%E6%94%BE%E6%A0%B8%E5%BA%9F%E6%B0%B4%E5%92%8C%E6%99%AE%E5%88%A9%E6%88%88%E9%87%91%E6%AD%BB%E6%8E%89%E7%9A%84%E7%9C%8B%E6%B3%95/</id>
    <published>2023-08-25T08:42:02.000Z</published>
    <updated>2023-08-25T09:05:25.370Z</updated>
    
    <content type="html"><![CDATA[<p>昨天是2023年8月24号，星期四，笔者所在的城市，天气晦暗不明。</p><p>这一天发生两件大事，一个是发生在遥远的、寒冷的俄罗斯，其瓦格纳首领普利戈金死掉了，乘坐的私人飞机被俄罗斯自己的导弹打掉了，动手的人除了普京，我想不出来第二个人；另一件事是发生在我们的邻邦日本，他们又又又又一次向海水里排放福岛核电站的废水，激起了国内同胞的一致指责。</p><p>我不太懂，但是我还是想就这两件事讲一讲自己的看法。</p><p>首先先说俄罗斯的事情，普里戈金在今年6月宣布清君侧，要杀掉国防部长绍伊古和国防参谋总长格拉西莫夫，这就是造反。但是很神奇的一件事是，他宣布造反之后，就不知道在做什么了。拖了将近两个月，又是去白俄罗斯，又是去非洲，总之造反的事情一件没干，乱七八糟的事情一件没少，最后被干掉几乎是必然的。造反就是把脑袋别在裤腰带上，不要bb就是干，结果厨子犯了大忌，死掉是必然的。这不禁让我想起了中国历史上的两次故事–其一是自己家族大权在握，手里握着皇帝这张牌，但是在造反派信誓旦旦、指水为誓的“优渥”条件下，还以为自己真的能做富家翁，结果葬送自家江山的事情；第二件事，其主将挟持中国领袖，逼其打乱自己的施政计划而又因为犹豫没做更进一步的事情，导致最后被囚禁很多年的事情。以史为鉴，想当然尔，老匹夫死得不冤。</p><p>然后是日本，我印象里日本也不是第一次排放核废水了，早在2011年311大地震那时候就已经有过核废水排放入海的事情了，而且中途也陆续发生过几次，怎么日本人没喊叫，我们国人却群情激愤呢？而且有个更加搞笑的情况，也不知道谁起的头，说买盐能防辐射，导致大批人去抢盐。</p><p>盐能不能防辐射我不知道，吃多了很难受这个事情是确定的。而且盐是一种瘾品，并不单单是一种调味料。吃多了会上瘾，就会死人。我不知道给人们宣称盐能防辐射的是一批什么人，也不知道真的信这种传言的又是什么人，古语有云，非蠢即坏，诸君可以自行对号入座。</p><p>另外，我们现在的世界充满了不确定和纷争，也时刻处在变化当中。能活着已经很不容易了，何苦再去操着卖白菜的钱，去操卖白粉的命呢？有这干劲，还不如先让自己吃得好一些，活得快乐一些，精神世界充实一些，也算自己奋斗过了。而不是盯着这种事，相信这种谣言，还给别人当韭菜割，属实无趣了。</p><p>以上，就酱。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;昨天是2023年8月24号，星期四，笔者所在的城市，天气晦暗不明。&lt;/p&gt;
&lt;p&gt;这一天发生两件大事，一个是发生在遥远的、寒冷的俄罗斯，其瓦格纳首领普利戈金死掉了，乘坐的私人飞机被俄罗斯自己的导弹打掉了，动手的人除了普京，我想不出来第二个人；另一件事是发生在我们的邻邦日本，</summary>
      
    
    
    
    <category term="失眠随想" scheme="http://eryoung2.github.io/categories/%E5%A4%B1%E7%9C%A0%E9%9A%8F%E6%83%B3/"/>
    
    
    <category term="评论" scheme="http://eryoung2.github.io/tags/%E8%AF%84%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>煞笔软考网工</title>
    <link href="http://eryoung2.github.io/2023/07/21/%E7%85%9E%E7%AC%94%E8%BD%AF%E8%80%83%E7%BD%91%E5%B7%A5/"/>
    <id>http://eryoung2.github.io/2023/07/21/%E7%85%9E%E7%AC%94%E8%BD%AF%E8%80%83%E7%BD%91%E5%B7%A5/</id>
    <published>2023-07-21T02:39:32.000Z</published>
    <updated>2023-07-21T02:46:00.632Z</updated>
    
    <content type="html"><![CDATA[<p>2023年软考成绩出了，不出意料地没过。</p><p>没过就没过吧，中级而已，也就当做高级考试的一模考试了，但是我看了一下通过率，实在是低得不成样子，可能只有10%左右吧。</p><p>甚至有些IP、IE也考不过，做了很多年专业的网工也考不过，这就很成问题了。</p><p>再加上作弊门、煞笔CDN，答案也不公布，就是个纯纯的黑箱操作。</p><p>真黑，真黑！</p><p>但愿下半年考网规，我可以复习更努力些，涉猎更广博些，态度更认真些，争取通过它！</p><p>但愿网规可以正常一些吧，不然这考试真的烂透了！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2023年软考成绩出了，不出意料地没过。&lt;/p&gt;
&lt;p&gt;没过就没过吧，中级而已，也就当做高级考试的一模考试了，但是我看了一下通过率，实在是低得不成样子，可能只有10%左右吧。&lt;/p&gt;
&lt;p&gt;甚至有些IP、IE也考不过，做了很多年专业的网工也考不过，这就很成问题了。&lt;/p&gt;
</summary>
      
    
    
    
    <category term="失眠随想" scheme="http://eryoung2.github.io/categories/%E5%A4%B1%E7%9C%A0%E9%9A%8F%E6%83%B3/"/>
    
    
    <category term="杂谈" scheme="http://eryoung2.github.io/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>jenkins流水线报错</title>
    <link href="http://eryoung2.github.io/2023/07/16/jenkins%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%8A%A5%E9%94%99/"/>
    <id>http://eryoung2.github.io/2023/07/16/jenkins%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%8A%A5%E9%94%99/</id>
    <published>2023-07-15T17:08:19.000Z</published>
    <updated>2023-07-15T17:12:52.076Z</updated>
    
    <content type="html"><![CDATA[<h2 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h2><p>今天在使用jenkins时，流水线有报错：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:</span><br><span class="line">WorkflowScript: 1: unable to resolve class Declarative </span><br></pre></td></tr></table></figure><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>正如报错所示，流水线的第一行内容不符合pipeline流水线的语法，因此将其注释即可。</p><p>例如，我们使用hello-world的流水线时，官方给出的pipeline如下，此时我们需要注释第一行，以使其可以符合pipeline语法：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Jenkinsfile (Declarative Pipeline) 需要注释</span></span><br><span class="line">pipeline &#123;</span><br><span class="line">    agent any </span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&#x27;Stage 1&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                echo <span class="string">&#x27;Hello world!&#x27;</span> </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后问题解决。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://cloud.tencent.com/developer/ask/sof/106548582/answer/117522876">用户对问题“Jenkins在构建Python脚本时“无法解决类声明性”错误”的回答 - 问答 - 腾讯云开发者社区-腾讯云</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;错误&quot;&gt;&lt;a href=&quot;#错误&quot; class=&quot;headerlink&quot; title=&quot;错误&quot;&gt;&lt;/a&gt;错误&lt;/h2&gt;&lt;p&gt;今天在使用jenkins时，流水线有报错：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;</summary>
      
    
    
    
    <category term="工具使用" scheme="http://eryoung2.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
    <category term="jenkins" scheme="http://eryoung2.github.io/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>《四季》-- 陈奕迅</title>
    <link href="http://eryoung2.github.io/2023/07/01/%E3%80%8A%E5%9B%9B%E5%AD%A3%E3%80%8B-%E9%99%88%E5%A5%95%E8%BF%85/"/>
    <id>http://eryoung2.github.io/2023/07/01/%E3%80%8A%E5%9B%9B%E5%AD%A3%E3%80%8B-%E9%99%88%E5%A5%95%E8%BF%85/</id>
    <published>2023-06-30T17:10:06.000Z</published>
    <updated>2023-06-30T17:13:46.019Z</updated>
    
    <content type="html"><![CDATA[<p>我記起那年春天<br>得我一個不知的欺騙<br>如天空的污染 終於都上演</p><p>    </p><p>我記起那年暑天<br>友情愛情兩邊都發現虧欠<br>情路上跌損</p><p>    </p><p>最後已事過境遷<br>長街風景已變<br>再度回想誰的臉<br>往日哪位少年</p><p>    </p><p>又再路過事發景點<br>痛傷少不免<br>仍是會流淚失眠<br>尚記得當天貫心的一箭</p><p>    </p><p>我記起那年秋天<br>飛過一隻心酸小孤燕<br>半枯乾的枝節 於窗邊發展</p><p>    </p><p>我記起那年的冬天<br>半矇半矓困於繭裡面<br>兜轉 緣份未看穿</p><p>    </p><p>最後已事過境遷<br>長街風景已變<br>再度回想誰的臉<br>往日哪位少年</p><p>    </p><p>又再路過事發景點<br>痛傷少不免<br>仍是會流淚失眠<br>淚染穿心穿肺那一點</p><p>    </p><p>季度裡事過境遷<br>蝴蝶終於蛻變<br>再沒留戀誰的臉<br>往日兩位少年</p><p>    </p><p>就算讓世事再翻演<br>會否不改變<br>仍是會離別 糾纏<br>拔去穿心一箭 感恩不怨</p><p>    </p><p>我感激這年春天<br>花再開遍祝福相獻<br>待那邱比特放出新一箭</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我記起那年春天&lt;br&gt;得我一個不知的欺騙&lt;br&gt;如天空的污染 終於都上演&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;我記起那年暑天&lt;br&gt;友情愛情兩邊都發現虧欠&lt;br&gt;情路上跌損&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;最後已事過境遷&lt;br&gt;長街風景已變&lt;br&gt;再度回想誰的臉&lt;b</summary>
      
    
    
    
    <category term="歌词" scheme="http://eryoung2.github.io/categories/%E6%AD%8C%E8%AF%8D/"/>
    
    
    <category term="陈奕迅" scheme="http://eryoung2.github.io/tags/%E9%99%88%E5%A5%95%E8%BF%85/"/>
    
  </entry>
  
  <entry>
    <title>《盲婚哑嫁》-- 陈奕迅</title>
    <link href="http://eryoung2.github.io/2023/06/30/%E3%80%8A%E7%9B%B2%E5%A9%9A%E5%93%91%E5%AB%81%E3%80%8B-%E9%99%88%E5%A5%95%E8%BF%85/"/>
    <id>http://eryoung2.github.io/2023/06/30/%E3%80%8A%E7%9B%B2%E5%A9%9A%E5%93%91%E5%AB%81%E3%80%8B-%E9%99%88%E5%A5%95%E8%BF%85/</id>
    <published>2023-06-30T14:07:56.000Z</published>
    <updated>2023-07-02T13:51:22.460Z</updated>
    
    <content type="html"><![CDATA[<p>若，如若时辰未到，似水点散下落花，变朝露，</p><p>若，如若时来运到，水点经过瀑布，万人赞好。</p><p>    </p><p>缺一门，你尚有星门，</p><p>能不管，离合注定，你定悲欢。</p><p>    </p><p>忘记她，仿似遗忘密码， </p><p>无密码，方可以忘记她。</p><p>随镜花，一切如盲婚哑嫁，</p><p>由它去转化。</p><p>    </p><p>别，别去怀恨月老，</p><p>至少得到弹指间，那花渡。</p><p>苦，苦水随甜蜜续吐，</p><p>暗黑先会顿觉，夕阳那么好。</p><p>    </p><p>五七言，也是太多言，能肤浅，</p><p>忘掉对白，李白也是曲线。</p><p>    </p><p>忘记她，仿似遗忘密码，</p><p>无密码，方可以忘记她。</p><p>随镜花，一切如盲婚哑嫁，作得准吗，</p><p>无谓征婚转嫁，无谓招婚改嫁。</p><p>    </p><p>忘记她，抛弃遗传密码，</p><p>无密码，根生已忘记花。</p><p>忘记花，花瓣随盲婚哑嫁，</p><p>人非花，飞花与芽东与夏。</p><p>凡间的戏吗。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;若，如若时辰未到，似水点散下落花，变朝露，&lt;/p&gt;
&lt;p&gt;若，如若时来运到，水点经过瀑布，万人赞好。&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;缺一门，你尚有星门，&lt;/p&gt;
&lt;p&gt;能不管，离合注定，你定悲欢。&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;忘记她，仿似遗忘密码， &lt;/p</summary>
      
    
    
    
    <category term="歌词" scheme="http://eryoung2.github.io/categories/%E6%AD%8C%E8%AF%8D/"/>
    
    
    <category term="陈奕迅" scheme="http://eryoung2.github.io/tags/%E9%99%88%E5%A5%95%E8%BF%85/"/>
    
  </entry>
  
  <entry>
    <title>《知足》-- 五月天</title>
    <link href="http://eryoung2.github.io/2023/06/28/%E3%80%8A%E7%9F%A5%E8%B6%B3%E3%80%8B-%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    <id>http://eryoung2.github.io/2023/06/28/%E3%80%8A%E7%9F%A5%E8%B6%B3%E3%80%8B-%E4%BA%94%E6%9C%88%E5%A4%A9/</id>
    <published>2023-06-28T07:25:16.000Z</published>
    <updated>2023-06-29T15:09:42.800Z</updated>
    
    <content type="html"><![CDATA[<p>怎么去拥有，一道彩虹，<br>怎么去拥抱，一夏天的风。<br>天上的星星像地上的人，<br>总是不能懂，不能觉得足够。</p><p>    </p><p>如果我爱上，你的笑容，<br>要怎么收藏，要怎么拥有。<br>如果你快乐，不是为我，<br>会不会放手，其实才是拥有。</p><p>    </p><p>当一阵风吹来，风筝飞向天空，<br>为了你，而祈祷，而祝福，而感动。<br>终于你身影消失在，人海尽头，<br>才发现，笑着哭，最痛。</p><p>    </p><p>那年你和我，那个山丘，<br>那样的唱着，那一年的歌。<br>那年的回忆，那么足够，<br>足够我天天都，品尝着寂寞。</p><p>    </p><p>当一阵风吹来，风筝飞向天空，<br>为了你，而祈祷，而祝福，而感动。<br>终于你身影消失在，人海尽头，<br>才发现，笑着哭，最痛。</p><p>当一阵风吹来，风筝飞向天空，<br>为了你，而祈祷，而祝福，而感动。<br>终于你身影消失在，人海尽头，<br>才发现，笑着哭，最痛，喔~~</p><p>    </p><p> <br>如果我爱上，你的笑容，<br>要怎么收藏，要怎么拥有。<br>如果你快乐再不是为我，<br>会不会放手，其实才是拥有。</p><p>    </p><p> <br>知足的快乐，叫我忍受心痛，<br>知足的快乐，叫我忍受心痛。。。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;怎么去拥有，一道彩虹，&lt;br&gt;怎么去拥抱，一夏天的风。&lt;br&gt;天上的星星像地上的人，&lt;br&gt;总是不能懂，不能觉得足够。&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;如果我爱上，你的笑容，&lt;br&gt;要怎么收藏，要怎么拥有。&lt;br&gt;如果你快乐，不是为我，&lt;br&gt;会不会放手，其实才是拥有</summary>
      
    
    
    
    <category term="歌词" scheme="http://eryoung2.github.io/categories/%E6%AD%8C%E8%AF%8D/"/>
    
    
    <category term="五月天" scheme="http://eryoung2.github.io/tags/%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    
  </entry>
  
  <entry>
    <title>docker-compose搭建wordpress</title>
    <link href="http://eryoung2.github.io/2023/06/13/docker-compose%E6%90%AD%E5%BB%BAwordpress/"/>
    <id>http://eryoung2.github.io/2023/06/13/docker-compose%E6%90%AD%E5%BB%BAwordpress/</id>
    <published>2023-06-13T01:37:51.000Z</published>
    <updated>2023-08-27T07:17:22.673Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我们都知道，docker是一个运行容器的软件。同时它也配置了一个运行一组容器的软件，叫做docker-compose。当我们使用非常小规模容器化应用的时候，我们可以使用此docker-compose去做。</p><h2 id="docker-compose的介绍"><a href="#docker-compose的介绍" class="headerlink" title="docker-compose的介绍"></a>docker-compose的介绍</h2><p>根据官网的描述，docker-compose是一个能够管理多容器的工具，可以使用yaml文件来编写所需资源，并一键管理。</p><p>docker-compose支持的功能有：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@master wordpress]# docker-compose</span><br><span class="line">Commands:</span><br><span class="line">  build              Build or rebuild services</span><br><span class="line">  bundle             Generate a Docker bundle from the Compose file</span><br><span class="line">  config             Validate and view the Compose file</span><br><span class="line">  create             Create services</span><br><span class="line">  down               Stop and remove containers, networks, images, and volumes</span><br><span class="line">  events             Receive real time events from containers</span><br><span class="line">  exec               Execute a command in a running container</span><br><span class="line">  help               Get help on a command</span><br><span class="line">  images             List images</span><br><span class="line">  kill               Kill containers</span><br><span class="line">  logs               View output from containers</span><br><span class="line">  pause              Pause services</span><br><span class="line">  port               Print the public port for a port binding</span><br><span class="line">  ps                 List containers</span><br><span class="line">  pull               Pull service images</span><br><span class="line">  push               Push service images</span><br><span class="line">  restart            Restart services</span><br><span class="line">  rm                 Remove stopped containers</span><br><span class="line">  run                Run a one-off command</span><br><span class="line">  scale              Set number of containers for a service</span><br><span class="line">  start              Start services</span><br><span class="line">  stop               Stop services</span><br><span class="line">  top                Display the running processes</span><br><span class="line">  unpause            Unpause services</span><br><span class="line">  up                 Create and start containers</span><br><span class="line">  version            Show the Docker-Compose version information</span><br></pre></td></tr></table></figure><h3 id="安装docker-compose-以Linux为例"><a href="#安装docker-compose-以Linux为例" class="headerlink" title="安装docker-compose(以Linux为例)"></a>安装docker-compose(以Linux为例)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y docker &amp;&amp; systemctl start docker</span><br><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/bin/docker-compose #需要root权限</span><br></pre></td></tr></table></figure><p>测试docker-compose是否安装成功：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose version</span><br></pre></td></tr></table></figure><h2 id="docker-compose配置文件编写并启动"><a href="#docker-compose配置文件编写并启动" class="headerlink" title="docker-compose配置文件编写并启动"></a>docker-compose配置文件编写并启动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/wordpress &amp;&amp; cd /usr/local/wordpress</span><br><span class="line">nano docker-compose.yml #编辑docker-compose.yml文件</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">   <span class="attr">db:</span></span><br><span class="line">     <span class="attr">image:</span> <span class="string">mysql:8.0</span></span><br><span class="line">     <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">--default_authentication_plugin=mysql_native_password</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">--character-set-server=utf8mb4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">--collation-server=utf8mb4_unicode_ci</span>     </span><br><span class="line">     <span class="attr">volumes:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">db_data:/var/lib/mysql</span></span><br><span class="line">     <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">     <span class="attr">environment:</span></span><br><span class="line">       <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">somewordpress</span></span><br><span class="line">       <span class="attr">MYSQL_DATABASE:</span> <span class="string">wordpress</span></span><br><span class="line">       <span class="attr">MYSQL_USER:</span> <span class="string">wordpress</span></span><br><span class="line">       <span class="attr">MYSQL_PASSWORD:</span> <span class="string">wordpress</span></span><br><span class="line"></span><br><span class="line">   <span class="attr">wordpress:</span></span><br><span class="line">     <span class="attr">depends_on:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">     <span class="attr">image:</span> <span class="string">wordpress:latest</span></span><br><span class="line">     <span class="attr">ports:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">     <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">     <span class="attr">environment:</span></span><br><span class="line">       <span class="attr">WORDPRESS_DB_HOST:</span> <span class="string">db:3306</span></span><br><span class="line">       <span class="attr">WORDPRESS_DB_USER:</span> <span class="string">wordpress</span></span><br><span class="line">       <span class="attr">WORDPRESS_DB_PASSWORD:</span> <span class="string">wordpress</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db_data:</span></span><br></pre></td></tr></table></figure><p>编辑完毕之后，使用以下命令来启动：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure><p>但是，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Getting the final child&#x27;s pid from pipe caused: EOF: unknown</span><br></pre></td></tr></table></figure><p>如果遇到这个问题的话，原因是内存碎片过多，需要释放cache以消除问题。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo 3 &gt; /proc/sys/vm/drop_caches  #临时解决</span><br><span class="line">echo 1 &gt; /proc/sys/vm/compact_memory  #永久解决</span><br><span class="line">sysctl -w vm.compact_memory=1   #永久解决</span><br></pre></td></tr></table></figure><p>详情可以参考此文，特此感谢。</p><p><a href="https://www.jokerbai.com/archives/getting-the-final-childs-pid-from-pipe-caused">Getting the final child’s pid from pipe caused: EOF: unknown</a></p><p>然后就会看到以下的结果：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master wordpress]# docker-compose up -d</span><br><span class="line">wordpress_db_1 is up-to-date</span><br><span class="line">Starting wordpress_wordpress_1 ...</span><br><span class="line">Starting wordpress_wordpress_1 ... done</span><br></pre></td></tr></table></figure><p>然后输入<a href="http://ip:80，查看是否已经正常启动即可。">http://ip:80，查看是否已经正常启动即可。</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://docs.docker.com/compose/">Docker Compose overview | Docker Documentation</a></p><p><a href="https://bbs.huaweicloud.com/blogs/286823">解决docker-compose: command not found问题的两种常用方法-云社区-华为云</a></p><p><a href="https://yeasy.gitbook.io/docker_practice/compose/wordpress">实战 WordPress - Docker — 从入门到实践</a></p><p><a href="https://www.jokerbai.com/archives/getting-the-final-childs-pid-from-pipe-caused">Getting the final child’s pid from pipe caused: EOF: unknown</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;我们都知道，docker是一个运行容器的软件。同时它也配置了一个运行一组容器的软件，叫做docker-compose。当我们使用非常小规模容</summary>
      
    
    
    
    <category term="容器" scheme="http://eryoung2.github.io/categories/%E5%AE%B9%E5%99%A8/"/>
    
    
    <category term="docker" scheme="http://eryoung2.github.io/tags/docker/"/>
    
    <category term="wordpress" scheme="http://eryoung2.github.io/tags/wordpress/"/>
    
  </entry>
  
  <entry>
    <title>SRE笔试题 - 某金融机构</title>
    <link href="http://eryoung2.github.io/2023/06/05/SRE%E7%AC%94%E8%AF%95%E9%A2%98-%E6%9F%90%E9%87%91%E8%9E%8D%E6%9C%BA%E6%9E%84/"/>
    <id>http://eryoung2.github.io/2023/06/05/SRE%E7%AC%94%E8%AF%95%E9%A2%98-%E6%9F%90%E9%87%91%E8%9E%8D%E6%9C%BA%E6%9E%84/</id>
    <published>2023-06-04T19:19:55.000Z</published>
    <updated>2023-08-05T08:43:39.716Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><ol><li><p>给定一个路径&#x2F;var&#x2F;store，在这个路径下创建一个本地git仓库sre-test，作为提交点</p></li><li><p>下载sre-test仓库到本地，创建两个分支master和test</p></li><li><p>master先提交一次，test提交3次</p></li><li><p>最后，得到所有四次提交的记录。</p></li></ol><h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><ol><li>跳到&#x2F;var&#x2F;store下，创建本地远程仓库sre-test.git</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /var/store</span><br><span class="line">git init --bare sre-test.git</span><br></pre></td></tr></table></figure><ol start="2"><li>将sre-test.git下载到本地</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone sre-test.git sre-test</span><br></pre></td></tr></table></figure><ol start="3"><li>进入本地目录，创建master和test分支</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd sre-test</span><br><span class="line">git checkout -b test</span><br></pre></td></tr></table></figure><ol start="4"><li>切换回master分支，创建一个新文件，写入一些内容，提交并查看提交log</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">echo &quot;master&quot; &gt; master_log</span><br><span class="line">git add master_log</span><br><span class="line">git commit -m &quot;1st master commit&quot;</span><br><span class="line">git push -u</span><br><span class="line">git log</span><br></pre></td></tr></table></figure><ol start="5"><li>切换到test分支，创建3个新文件，写入一些内容，提交3次并查看提交log</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout test</span><br><span class="line">echo &quot;test1&quot; &gt; test1_log</span><br><span class="line">echo &quot;test2&quot; &gt; test2_log</span><br><span class="line">echo &quot;test3&quot; &gt; test3_log</span><br><span class="line">···提交过程略</span><br><span class="line">git log</span><br></pre></td></tr></table></figure><ol start="6"><li>合并test到master分支，并查看日志</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge test</span><br><span class="line">git log</span><br></pre></td></tr></table></figure><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>刚开始看到这道题时，我是挺懵逼的。因为没看到远程目录，后来才发现要在本地模拟这个过程，第一点是最难的，其他的就可以迎刃而解了。</p><p>另添加算法题一道：</p><p>[grouping options](<a href="https://www.jiuzhang.com/solution/grouping-options/">九章算法 - 帮助更多程序员找到好工作，硅谷顶尖IT企业工程师实时在线授课为你传授面试技巧</a>)</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; title=&quot;题目&quot;&gt;&lt;/a&gt;题目&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;给定一个路径&amp;#x2F;var&amp;#x2F;store，在这个路径下创建一个本地git仓库sre-test，作为提交点&lt;/p</summary>
      
    
    
    
    <category term="面试" scheme="http://eryoung2.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
    <category term="git" scheme="http://eryoung2.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>《干杯》 -- 五月天</title>
    <link href="http://eryoung2.github.io/2023/06/01/%E3%80%8A%E5%B9%B2%E6%9D%AF%E3%80%8B-%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    <id>http://eryoung2.github.io/2023/06/01/%E3%80%8A%E5%B9%B2%E6%9D%AF%E3%80%8B-%E4%BA%94%E6%9C%88%E5%A4%A9/</id>
    <published>2023-06-01T01:13:01.000Z</published>
    <updated>2023-06-01T01:32:05.425Z</updated>
    
    <content type="html"><![CDATA[<p>会不会，有一天，时间真的能倒退，</p><p>退回你的我的，回不去的，悠悠的岁月。</p><p>也许会，有一天，世界真的有终点，</p><p>也要和你举起回忆酿的甜，和你再干一杯。</p><p>    </p><p>如果说要我选出，代表青春，那个画面，</p><p>浮现了，那滴眼泪，那片蓝天，那年毕业，</p><p>那一张，边哭边笑，还要拥抱，是你的脸，</p><p>想起来，可爱可怜，可歌可泣，可是多怀念。</p><p>怀念总是，突然怀念，不谈条件，</p><p>当回忆，冲破考卷，冲出岁月，在我眼前，</p><p>我和你，流着汗水，喝着汽水，在操场边，</p><p>说好了，无论如何，一起走到，未来的世界。</p><p>现在就是，那个未来，那个世界，</p><p>为什么你的身边，我的身边，不是同一边。</p><p>友情曾像，诺亚方舟，坚强誓言，</p><p>只是我，望着海面，等着永远，模糊了视线。</p><p>    </p><p>会不会，有一天，时间真的能倒退，</p><p>退回你的我的，回不去的，悠悠的岁月。</p><p>也许会，有一天，世界真的有终点，</p><p>也要和你举起回忆酿的甜，和你再干一杯。</p><p>    </p><p>这些年，买了四轮，买了手边，买了单眼，</p><p>却发现，追不到的，停不了的，还是那些。</p><p>人生是，只有认命，只能宿命，只好宿醉，</p><p>只剩下，高的笑点，低的哭点，却没成熟点。</p><p>成熟就是，幻想幻灭，一场磨练，</p><p>为什么，只有梦想，越磨越小，小到不见。</p><p>有时候，好想流泪，好想流泪，却没眼泪，</p><p>期待会，你会不会，他会不会，开个同学会。</p><p>他在等你，你在等我，我在等谁，</p><p>又是谁，孩子没睡，电话没电，心情没准备。</p><p>天空不断，黑了又亮，亮了又黑，</p><p>那光阴，沧海桑田，远走高飞，再没力气追。</p><p>    </p><p>会不会，有一天，时间真的能倒退，</p><p>退回你的我的，回不去的，悠悠的岁月。</p><p>也许会，有一天，世界真的有终点，</p><p>也要和你举起回忆酿的甜，和你再干一杯。</p><p>    </p><p>会不会，有一天，时间真的能倒退，</p><p>退回你的我的，回不去的，悠悠的岁月。</p><p>也许会，有一天，世界真的有终点，</p><p>也要和你举起回忆酿的甜，和你再干一杯。</p><p>    </p><p>终究会，有一天，我们都变成昨天，</p><p>是你，陪我走过，一生一回，匆匆的人间。</p><p>有一天，就是今天，今天就是有一天，</p><p>说出一直没说，对你的感谢，和你再干一杯。</p><p>再干一杯永远，喝了就能万岁，岁岁和年年。</p><p>    </p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p><p>时间都停了，他们都回来了，</p><p>怀念的人啊，等你的来到……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;会不会，有一天，时间真的能倒退，&lt;/p&gt;
&lt;p&gt;退回你的我的，回不去的，悠悠的岁月。&lt;/p&gt;
&lt;p&gt;也许会，有一天，世界真的有终点，&lt;/p&gt;
&lt;p&gt;也要和你举起回忆酿的甜，和你再干一杯。&lt;/p&gt;
&lt;p&gt;    &lt;/p&gt;
&lt;p&gt;如果说要我选出，代表青春，那个画面，&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="歌词" scheme="http://eryoung2.github.io/categories/%E6%AD%8C%E8%AF%8D/"/>
    
    
    <category term="五月天" scheme="http://eryoung2.github.io/tags/%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    
  </entry>
  
  <entry>
    <title>对“见怪不怪”的真实体会</title>
    <link href="http://eryoung2.github.io/2023/05/28/%E5%AF%B9%E2%80%9C%E8%A7%81%E6%80%AA%E4%B8%8D%E6%80%AA%E2%80%9D%E7%9A%84%E7%9C%9F%E5%AE%9E%E4%BD%93%E4%BC%9A/"/>
    <id>http://eryoung2.github.io/2023/05/28/%E5%AF%B9%E2%80%9C%E8%A7%81%E6%80%AA%E4%B8%8D%E6%80%AA%E2%80%9D%E7%9A%84%E7%9C%9F%E5%AE%9E%E4%BD%93%E4%BC%9A/</id>
    <published>2023-05-27T19:19:55.000Z</published>
    <updated>2023-07-02T13:51:13.732Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>2023年5月27号，是全国计算机资格考试（简称软考）开考的日子，笔者也参加了这次考试，科目为网络工程师。</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>00:00～06:30 笔者彻夜未眠，主要是做着对考试的各种猜想，就这样到了6点半，出发去考场。</p><p>06:30～07:30 在地铁上刷了两套上午题，感觉不错</p><p>07:30～08:00 吃早餐，点了一个鸡蛋，其他的吃不下，进考场</p><p>08:00～09:00 进场、准备考试</p><p>09:00～11:00 上午场，做题、检查6遍、估分，估计低分飘过吧</p><p>11:00～13:00 午休，看了看历年下午的真题，看了看知识点，调整心态，依然没吃什么东西，天气太热没有胃口</p><p>13:00～14:00 进场、准备考试，在准考证背面写了“可不敢半场开香槟”</p><p>14:00～16:00 阴间旅游两小时，边骂边做题，答案全靠蒙，已然gg</p><p>16:00～16:30 吃东西，然后看到作弊相关动态，持续骂娘</p><p>17:00～18:00 回家，路上碰到一个作弊者，跟我说花4万块买的答案，准备了3份入场考试，作弊原因是为了积分入户，给小孩读书</p><p>18:00～23:00 睡了一觉</p><p>23:00～现在 持续逛群，持续输出c语言</p><h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>可能没有后续了，等到7月份再说吧，要不要继续备战网络规划设计师，网工是不继续考了，这种阴间考试性价比太低，不如搞一些实际的本事。</p><h2 id="再后续"><a href="#再后续" class="headerlink" title="再后续"></a>再后续</h2><p>这几年随着自己的成长，恶心的事情见太多，人心都麻了。现在的我只想躺平，对恶心的事情见怪不怪，最终就变了自己最讨厌的样子。</p><h2 id="再再后续"><a href="#再再后续" class="headerlink" title="再再后续"></a>再再后续</h2><p>只想活着，不敢奢求其他任何好运。</p><p align="right">--ErYoung作于2023年05月28日凌晨3点33分</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;2023年5月27号，是全国计算机资格考试（简称软考）开考的日子，笔者也参加了这次考试，科目为网络工程师。&lt;/p&gt;
&lt;h2 id=&quot;过程&quot;&gt;</summary>
      
    
    
    
    <category term="失眠随想" scheme="http://eryoung2.github.io/categories/%E5%A4%B1%E7%9C%A0%E9%9A%8F%E6%83%B3/"/>
    
    
    <category term="杂谈" scheme="http://eryoung2.github.io/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
</feed>
